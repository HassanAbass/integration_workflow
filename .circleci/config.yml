# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

defaults: &machine
    docker:
        - image: circleci/node:13.8.0

commands:
    print_pipeline_id:
        description:  prints the Circle CI Workflow ID from its environment variable
        # parameters:
        #     to:
        #         default: "world"
        #         type: string
        steps:
            - run: echo "Hello $CIRCLE_WORKFLOW_ID"

jobs:
    save_hello_world_output:
        <<: *machine
        steps:
            - checkout
            - print_pipeline_id
            # - run: echo "text to output here" > output.txt; cp output.txt ~/
            # - persist_to_workspace:
            #       root: ~/
            #       paths:
            #           - output.txt
    # print_output_file:
    #     <<: *machine
    #     steps:
    #         - checkout
    #         - attach_workspace:
    #               at: ~/
    #         - run: cat ~/output.txt

# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
    say-hello-workflow:
        jobs:
            - save_hello_world_output
            # - print_output_file:
            #       requires:
            #           - save_hello_world_output
